# =============================================================================
# Railway Configuration - AGI Stack
# =============================================================================
# Unified AGI interface: Kuzu + LanceDB + GraphQL + VSA + NARS + MUL + Persona
# =============================================================================

[build]
builder = "dockerfile"
dockerfilePath = "extension/agi_stack/Dockerfile"

[deploy]
numReplicas = 1
healthcheckPath = "/health"
healthcheckTimeout = 30
restartPolicyType = "ON_FAILURE"
restartPolicyMaxRetries = 3

[env]
# Database paths
KUZU_DB_PATH = "/data/kuzu"
LANCE_DB_PATH = "/data/lancedb"

# CPU optimization (minimize Railway bill)
OMP_NUM_THREADS = "1"
MKL_NUM_THREADS = "1"
OPENBLAS_NUM_THREADS = "1"
NUMEXPR_NUM_THREADS = "1"

# Python
PYTHONOPTIMIZE = "2"
PYTHONUNBUFFERED = "1"

# App
LOG_LEVEL = "warning"
